input {
  file {
    path => "/Users/chrisowen/Desktop/tranmere-web/tmp/games/*.csv"
    tags => [ "games" ]
    start_position => "beginning"
    sincedb_path => "/tmp/logstash"
  }
}
filter {
  if "games" in [tags]{
      csv {
         separator => ","
         columns => ["Date","competition","Season","home","visitor","FT","hgoal","vgoal","division","tier","round","tie","leg","aet","pens","Venue","attendance","neutral", "Programme"]
      }
      mutate {gsub => ["attendance", ",", ""]}
  }
}
output {
  if "games" in [tags]{
       elasticsearch {
         hosts => "https://e1450e31845040639d816d03009c1e1d.europe-west2.gcp.elastic-cloud.com:9243"
         user =>  elastic
         password => YsMOJrRgFtk75h4MEDRwuSwt
         index => "matches"
      }
      stdout {}
  }
}